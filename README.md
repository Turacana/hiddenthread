# Стеганографический скрипт
## Что это?
Скрипт зашифровывает текст или файлы в картинку-контейнер. При наличии скрипта внутреннее содержимое можно расшифровать. Можно отправить личное сообщение анону, которое будет видеть только он.
Больше никаких автозамен, вордфильтров и правил, когда модератор может забанить любого неугодного.

## Как установить?
Установите любой менеджер пользовательских скриптов:
* [Violentmonkey](https://violentmonkey.github.io)
* [Tampermonkey](https://www.tampermonkey.net)

Установите скрипт:
* Зайти [сюда](./HiddenThread.user.js) и нажать на `Raw` справа. Кликните на `установить`.
* Откройте любой тред, обновите страницу.
* В треде под обычной формой постинга (не плавающей) появится вторая форма, через которую можно загрузить скрытопосты.

## Как пользоваться?
1. Написать скрытый текст или прикрепить файл под не плавающей формой постинга. Файл может быть любого формата.
2. *Опционально.* Выбрать картинку-контейнер в которую будет зашифрована информация. Если картинка не выбрана, то она будет создана автоматически. Пользователям без скрипта будет видна лишь картинка-контейнер.
3. *Опционально.* Подписать пост, сгенерировав и сохранив приватный ключ, чтобы не потерять его при обновлении страницы. На него тебе могут написать в личные сообщения другие пользователи. Для этого достаточно вставить ключ, который отображается над его скрытым постом, в графу `Публичный ключ получателя`.
4. Нажать на `Создать картинку со скрытопостом`. Картинка сгенерируется и сама вставится в форму постинга. Остаётся только отправить её.
Можно скрыть все другие посты на борде кроме постов с зашифрованным контейнером. Нажмите `Свернуть/развернуть все обычные посты` в шапке сайта.

## FAQ
### Как это выглядит?
![](https://i.imgur.com/I3MfqSr.png)

### Зачем нужен пароль?
Пароль позволяет создать скрытотред только для тех кто знает пароль. Либо на случай если треды с пустым паролем будут затирать или банить.

### Что такое ключи?
Функция `Сгенерировать ключи` создает два ключа.
* `Публичный ключ` - этот ключ доступен всем в треде. С помощью него можно зашифровать сообщение и отравить лично вам. Публичный ключ генерируется из приватного, его можно не сохранять.
* `Приватный ключ` - этот ключ доступен только вам, сохраните его. С помощью него можно расшифровать сообщение, которое было зашифровано публичным ключом. Кроме того, ключ можно использовать как уникальное имя - никто не сможет подписаться вашим публичным ключом, не зная приватного.

Чтобы отобразились личные сообщения введите свой приватный ключ в поле `Приватный ключ` и нажмите `Загрузить скрытопосты`.

### Как это работает?
Для скрытия данных используется стеганография методом LSB в PNG-изображениях.
- Шифрование произвольным паролем (`AES256-CBC`).
- Цифровая подпись поста приватным ключом (`ECDSA` `P-256`).
- Отправка приватных сообщений, которые сможет расшифровать только получатель (`ECDH` `P-256`).

### Известные ошибки
* В браузере `LibreWolf` ошибка `Blocked https://2ch.hk/.../res/...html from extracting canvas data because no user input was detected.` Для исправления зайдите в `about:config` и измените параметр `privacy.resistFingerprinting.autoDeclineNoUserInputCanvasPrompts` на `false`.

### История версий
- [0.4](../../pull/7)
- [0.3](../../pull/5)
- [0.2](../../pull/4)
